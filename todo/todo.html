<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TODO LIST</title>
  <link rel="stylesheet" href="r.css">
</head>
<body>
  <div class="container">
    <div class="header"> 
      <h1>Мои Заметки</h1>
    </div>

    <div class="search-bar">
      <input type="text" placeholder="Поиск заметки...">
      <button class="search-btn"><img src="Vector (1).svg"></button>
      <select class="filter">
        <option value="all">Все</option>
        <option value="active">Активные</option>
        <option value="complete">Выполненные</option>
      </select>
      <button id="theme-toggle"><img src="fff.svg"></button>
    </div>

    <ul class="todo-list">
      <li>
        <input type="checkbox" id="note1">
        <label for="note1">NOTE #1</label>
        <button class="edit-btn" aria-label="Редактировать"s><img src="trash-svgrepo-com 1.svg"></button>
        <button class="delete-btn" aria-label="Удалить"><img src="Frame 6.svg"></button>
      </li>
      <li>
        <input type="checkbox" id="note2" >
        <label for="note2">NOTE #2</label>
        <button class="edit-btn" aria-label="Редактировать"s><img src="trash-svgrepo-com 1.svg"></button>
        <button class="delete-btn" aria-label="Удалить"><img src="Frame 6.svg"></button>
      </li>
    </ul>

    
    <button class="add-task-btn">+</button>
  </div>

 <div class="modal" id="modal">
        <div class="modal-content">
            <span class="close" id="closeModal">&times;</span>
            <h2>Новая заметка</h2>
            <input type="text" id="noteInput" placeholder="Введите вашу заметку">
            <button id="apply">Применить</button>
            <button id="cancel">Отмена</button>
        </div>
    </div>
<script>
   const addTaskBtn = document.querySelector(".add-task-btn");
const modal = document.getElementById("modal");
const closeModal = document.getElementById("cancel");

addTaskBtn.onclick = function () {
  modal.style.display = "block";
};

closeModal.onclick = function () {
  modal.style.display = "none";
};

window.onclick = function (event) {
  if (event.target === modal) {
    modal.style.display = "none";
  }
};



const checkboxes = document.querySelectorAll('.todo-list input[type="checkbox"]');

checkboxes.forEach(checkbox => {
    checkbox.addEventListener('change', function() {
        const label = this.nextElementSibling; 

        if (this.checked) {
            label.classList.add('strike'); 
        } else {
            label.classList.remove('strike');
        }
    });
});


const themeToggle = document.getElementById("theme-toggle");
themeToggle.onclick = function () {
  document.body.classList.toggle("dark-theme");
  document.body.classList.toggle("light-theme");
};


const input = document.getElementById("noteInput");
const button = document.getElementById("apply");
const ul = document.getElementsByClassName("todo-list");
button.addEventListener("click", () => {
  const new_note_elem = document.createElement("li");
  const note_checkbox = document.createElement("input");
  const note_span = document.createElement("span");
  new_note_elem.classList.add("note");
  note_checkbox.setAttribute("type", "checkbox");
  note_span.innerText = input.value;
  new_note_elem.appendChild(note_checkbox);
  new_note_elem.appendChild(note_span);

  ul[0].appendChild(new_note_elem);
});




const menu = document.querySelectorAll(".filter");

menu[0].addEventListener("change", (e) => {
    console.log(e.target.value);
    const task_list = document.querySelectorAll(".todo-list>li");
    console.log(task_list);
let flag= e.target.value;
    for (let i = 0; i < task_list.length; i++) {

      let cb = task_list[i].childNodes[1];
      console.log(cb, cb.checked);
      task_list[i].style.display="flex";
      if(flag == "all") continue
      if(cb.checked){
         task_list[i].style.display=(flag =="active")?"none":"flex";
      }
      else{
         task_list[i].style.display=(flag =="active")?"flex":"none";
      }

    }
  });
</script>
</body>
</html>
